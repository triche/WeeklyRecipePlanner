<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Weekly Menu Planner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">

    <!-- Hero -->
    <header class="hero">
      <h1>Weekly Menu Planner</h1>
      <p>AI-powered weekly meal planner with macro tracking and shopping list generation. Uses OpenAI to create personalized 7-day meal plans based on your dietary preferences, restrictions, and macro goals.</p>
    </header>

    <!-- Features -->
    <section>
      <h2>Features</h2>
      <ul class="features">
        <li><strong>Macro-based meal planning</strong> Set daily targets for protein, carbs, fats, fiber, and calories</li>
        <li><strong>Day-of-week selector</strong> Choose which days to include in your plan (all 7 on by default)</li>
        <li><strong>Meal selector</strong> Choose which meals to include per day: Breakfast, Morning Snack, Lunch, Afternoon Snack, Dinner (all on by default)</li>
        <li><strong>AI-generated plans</strong> Full 7-day meal plans with breakfast, lunch, dinner, and morning/afternoon snacks</li>
        <li><strong>Dietary preferences</strong> Support for restrictions (vegetarian, gluten-free, etc.) and favorite cuisines</li>
        <li><strong>Consolidated shopping list</strong> Aggregated by category (Produce, Dairy, Meat &amp; Seafood, etc.)</li>
        <li><strong>Export options</strong> Copy shopping list to clipboard or download as Markdown</li>
        <li><strong>Recipe viewer</strong> Click any meal name to view a full AI-generated recipe with ingredients and step-by-step instructions in a modal; recipes are cached per session for instant re-access, and can be copied to clipboard or saved as Markdown</li>
        <li><strong>Free text input</strong> Provide any additional context for the AI to consider</li>
        <li><strong>Dev Console</strong> Built-in developer console for real-time log monitoring and error details (toggle with Ctrl+Shift+D)</li>
        <li><strong>Dockerized</strong> Run locally or deploy to any cloud platform</li>
      </ul>
    </section>

    <!-- Tech Stack -->
    <section>
      <h2>Tech Stack</h2>
      <table>
        <thead>
          <tr>
            <th>Layer</th>
            <th>Technology</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Frontend</td><td>React 18, TypeScript, Vite</td></tr>
          <tr><td>Backend</td><td>Node.js, Express, TypeScript</td></tr>
          <tr><td>AI</td><td>OpenAI API (GPT-5.2 or later)</td></tr>
          <tr><td>Infra</td><td>Docker, Docker Compose, GitHub Actions</td></tr>
          <tr><td>Testing</td><td>Vitest, React Testing Library, Supertest</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Getting Started -->
    <section>
      <h2>Getting Started</h2>

      <h3>Prerequisites</h3>
      <ul class="features" style="grid-template-columns: repeat(3, 1fr);">
        <li><strong>Node.js 20+</strong></li>
        <li><strong>npm</strong></li>
        <li><strong>OpenAI API key</strong></li>
      </ul>

      <h3>Setup</h3>
      <pre><code><span class="comment"># Clone the repository</span>
<span class="command">git clone &lt;repo-url&gt;</span>
<span class="command">cd WeeklyRecipePlanner</span>

<span class="comment"># Create your environment file</span>
<span class="command">cp .env.example .env</span>
<span class="comment"># Edit .env and add your OPENAI_API_KEY</span>

<span class="comment"># Install root dependencies</span>
<span class="command">npm install</span>

<span class="comment"># Install server dependencies</span>
<span class="command">cd server && npm install && cd ..</span>

<span class="comment"># Install client dependencies</span>
<span class="command">cd client && npm install && cd ..</span></code></pre>

      <h3>Development</h3>
      <pre><code><span class="comment"># Run both client and server in development mode</span>
<span class="command">npm run dev</span>

<span class="comment"># Or run them separately:</span>
<span class="command">npm run dev:server</span>   <span class="comment"># Backend on http://localhost:3001</span>
<span class="command">npm run dev:client</span>   <span class="comment"># Frontend on http://localhost:3000</span></code></pre>

      <h3>Testing</h3>
      <pre><code><span class="comment"># Run all tests</span>
<span class="command">npm test</span>

<span class="comment"># Run server tests only</span>
<span class="command">npm run test:server</span>

<span class="comment"># Run client tests only</span>
<span class="command">npm run test:client</span></code></pre>

      <h3>Linting</h3>
      <pre><code><span class="command">npm run lint</span></code></pre>

      <h3>Docker</h3>
      <pre><code><span class="comment"># Build and start all services</span>
<span class="command">docker-compose up --build</span>

<span class="comment"># Stop services</span>
<span class="command">docker-compose down</span></code></pre>

      <p>The app will be available at <code>http://localhost:3000</code> with the API at <code>http://localhost:3001</code>.</p>
    </section>

    <!-- Project Structure -->
    <section>
      <h2>Project Structure</h2>
      <div class="tree"><span class="folder">WeeklyRecipePlanner/</span>
â”œâ”€â”€ <span class="folder">client/</span>                  <span class="note"># React frontend (Vite)</span>
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">components/</span>      <span class="note"># React components</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ DayOfWeekSelector.tsx <span class="note"># Day picker toggle chips</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ DevConsole.tsx     <span class="note"># Dev mode log viewer</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ MealPlanForm.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MealPlanDisplay.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MealSlotSelector.tsx <span class="note"># Meal slot toggle chips</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ RecipeModal.tsx     <span class="note"># On-demand recipe viewer modal</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ ShoppingListDisplay.tsx
â”‚   â”‚   â”‚   â””â”€â”€ TagInput.tsx
â”‚   â”‚   â”œâ”€â”€ <span class="folder">services/</span>        <span class="note"># API client &amp; dev logger</span>
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ App.css
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ vitest.config.ts
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â””â”€â”€ nginx.conf
â”œâ”€â”€ <span class="folder">server/</span>                  <span class="note"># Express backend</span>
â”‚   â”œâ”€â”€ <span class="folder">src/</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">routes/</span>          <span class="note"># API route handlers</span>
â”‚   â”‚   â”œâ”€â”€ <span class="folder">services/</span>        <span class="note"># AI provider abstraction</span>
â”‚   â”‚   â”œâ”€â”€ app.ts           <span class="note"># Express app setup</span>
â”‚   â”‚   â”œâ”€â”€ config.ts        <span class="note"># Environment config</span>
â”‚   â”‚   â”œâ”€â”€ index.ts         <span class="note"># Server entry point</span>
â”‚   â”‚   â””â”€â”€ types.ts         <span class="note"># Shared types &amp; Zod schemas</span>
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ <span class="folder">docs/</span>
â”‚   â””â”€â”€ theory-of-operation.md
â”œâ”€â”€ .github/workflows/ci.yml <span class="note"># CI pipeline</span>
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ .env.example</div>
    </section>

    <!-- Environment Variables -->
    <section>
      <h2>Environment Variables</h2>
      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Required</th>
            <th>Default</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>OPENAI_API_KEY</code></td><td>Yes</td><td>â€”</td><td>Your OpenAI API key</td></tr>
          <tr><td><code>OPENAI_MODEL</code></td><td>No</td><td><code>gpt-5.2</code></td><td>OpenAI model to use</td></tr>
          <tr><td><code>PORT</code></td><td>No</td><td><code>3001</code></td><td>Server port</td></tr>
          <tr><td><code>NODE_ENV</code></td><td>No</td><td><code>development</code></td><td>Environment</td></tr>
          <tr><td><code>CORS_ORIGIN</code></td><td>No</td><td><code>http://localhost:3000</code></td><td>Allowed CORS origin</td></tr>
          <tr><td><code>VITE_API_URL</code></td><td>No</td><td><code>/api</code></td><td>Client API base URL</td></tr>
        </tbody>
      </table>
    </section>

    <!-- Dev Mode -->
    <section>
      <h2>Dev Mode</h2>
      <p>The app includes a built-in developer console for debugging. It captures all <code>console.log</code>, <code>console.info</code>, <code>console.warn</code>, and <code>console.error</code> output, plus unhandled errors and promise rejections.</p>

      <h3>How to activate</h3>
      <ul class="features" style="grid-template-columns: repeat(2, 1fr);">
        <li><strong>Toggle button</strong> Click the ðŸ›  button in the bottom-right corner of the screen</li>
        <li><strong>Keyboard shortcut</strong> Press <code>Ctrl+Shift+D</code> (Cmd+Shift+D on Mac)</li>
      </ul>

      <h3>Console features</h3>
      <ul class="features">
        <li><strong>Real-time log stream</strong> Color-coded levels (log, info, warn, error)</li>
        <li><strong>Level filtering</strong> Filter by log level with badge counts for errors and warnings</li>
        <li><strong>Stack traces</strong> Click error entries to expand full stack traces</li>
        <li><strong>Clear console</strong> Clear button to reset the console</li>
        <li><strong>API logging</strong> API requests are automatically logged with request/response details</li>
      </ul>
    </section>

    <!-- CI/CD -->
    <section>
      <h2>CI/CD</h2>
      <p>GitHub Actions runs on every pull request and push to <code>main</code>:</p>
      <ol>
        <li><strong>Server lint &amp; test</strong></li>
        <li><strong>Client lint &amp; test</strong></li>
        <li><strong>Docker build</strong> (after tests pass)</li>
      </ol>
    </section>

    <!-- License -->
    <section>
      <h2>License</h2>
      <p>See <a href="../LICENSE">LICENSE</a> for details.</p>
    </section>

    <footer class="footer">
      <p>Weekly Menu Planner &mdash; Built with React, Express &amp; OpenAI</p>
    </footer>

  </div>
</body>
</html>
